<!DOCTYPE html>
<html lang="en">
    
  <head>
    <title>HTML5 Activity - Markdown</title>
    <meta charset=utf-8>
      
    <!--attach scripts-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="webWorker.js"></script>

    <!-- geolocation -->
    <script>
        function showPosition(){
          if(navigator.geolocation){
            navigator.geolocation.getCurrentPosition(function(position){
              document.getElementById("geoLocation").innerHTML = position.coords.latitude + ", " + position.coords.longitude;
            });
          } else{
            document.getElementById("geoLocation").innerHTML = "hidden or unavailable";
          }
        } 
    </script>
    
    <!--local storage-->
    <script type="text/javascript">
        if(localStorage){
  
          $(document).ready(function(){
              
            function init() {
                if (localStorage["first_name"]) {
                    $("#firstName").val(localStorage["first_name"]);
                }
                if (localStorage["my_email"]) {
                    $("#myEmail").val(localStorage["my_email"]);
                }
                if (localStorage["guest_book"]) {
                    $("#guestbook").val(localStorage["guest_book"]);
                }
            }
          
            init();
          
            $(".save").click(function(){
              // Get input name
              var firstName = $("#firstName").val();
              var email = $("#myEmail").val();
              var guestbookText = $("#guestbook").val();
            
          	  // Store data
              localStorage.setItem("first_name", firstName);
              localStorage.setItem("my_email", email);
              localStorage.setItem("guest_book", guestbookText);
              
          	  alert("Your information has been saved!");
            });
                    
            $(".access").click(function(){
          	    // Retrieve data
          		alert("Name:  " + localStorage.getItem("first_name") + " | " + localStorage.getItem("e_mail"));
            });
            
          });
        
        } else{
          alert("Sorry, your browser do not support local storage.");
        }
    </script>
    
    <!-- web worker -->
    <script>
        var w;
        
        //Worker function for the clock
        function startWorker() {
          if(typeof(Worker) !== "undefined") {
            
            if(typeof(w) == "undefined") {
              w = new Worker("webWorker.js");
            }
            
            w.onmessage = function(event) {
              document.getElementById("currentTime").innerHTML = event.data;
            };
            
          } else {
            document.getElementById("currentTime").innerHTML = "Error contacting Web Worker...";
          }
        }
    </script>
  
  </head>    
    
  <body onload = "showPosition(); startWorker(); paintCanvas();">
      
    <!-- current time - WEB WORKER -->
    <div id="timeDisplay">
        <h3>Wob Worker</h3>
        <p>Current Time: <output id="currentTime"></output></p>
    </div>
    
    <!-- GeoLocation --> 
    <div id="locationSection">
        <h3>GeoLocation</h3>
        Your location is: ( <div id="geoLocation"></div> )
    </div>
      
    <!-- short video -->
    <div id="myVideo">
        <h3>Video: </h3>
        <video id="myVideo" width="320" height="240" controls> 
            <!-- video courtessy of loadfree.mobi [http://loadfree.mobi/movie-download/ZmbEv-gP_no/GI-Joe-Im-a-computer] -->
            <source src="GI_Joe_Im_a_computer.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </source>
        </video>
    </div>
    
    <!-- short audio -->
    <div id="myAudio">
        <h3>Audio:</h3>
        <audio controls>
            <source src="dial-up-modem-02.mp3" type="audio/mp3">
        </audio>
    </div>
    
    <!-- embedded blog article -->
    <div id="blogSection">
        
        <h3>Blog Section</h3>
        
        <p>
        Markdown affords a very convenient and easy way
        to style text without css. It would be great to 
        figure out how to embed it directly into the 
        html. 
        </p>

        <p>
        This would allow me to avoid having to style 
        things independently and use a pre-existing 
        standard, but to my knowledge, it doesn't afford
        a great means of separating out the tags. 
        </p>

        <p>
        I could write out each blog post in a json format, 
        but that seems very tedious and over-engineered. 
        Might be best to have some background interpreter.
        We'll see.
        </p>
    </div>
    
    <!-- canvas item -->
    <div id="canvasSection">
        <h3>Canvas:</h3>
        <canvas id=myCanvas width="400" height="200" style="border:1px solid #000000;"></canvas>
        <script>
            function paintCanvas() {
              var canvas  = document.getElementById("myCanvas");
              var context = canvas.getContext("2d");
              
              var grd = context.createLinearGradient(0,0,200,0);
              grd.addColorStop(0,"blue");
              grd.addColorStop(1,"grey");
              
              // Fill with gradient
              context.fillStyle = grd;
              context.fillRect(10,10,150,80);
              
            }
        </script>
    </div>
    
    <!-- required field -->
    <div id="infoSection">
        <label>Name: <input id="firstName" required placeholder="Enter your first name"></label>
        <br />
        <label>Email: <input id="myEmail" type="email" placeholder="Enter a valid Email Address"></label>
        <br />
    </div>
    
    <!-- editable content -->
    <div id="editableContentDisplay">
        <br />
        <h4>Collaborative paragraph reaction to the site:</h4>
        <section id="guestbook" contenteditable="true">
          <p>This is the first time i've seen a site that had this!</p>
          <p>This was really cool!</p>
        </section>
        <button type="button" class="save">Save Guestbook</button>
    </div>
    
  </body>
</html>